all: produto-openmp_gcc produto-openmp_icx produto-openmp_dpcpp produto-openmp_clang

produto-openmp_gcc: produto-openmp_gcc.o
	@gcc produto-openmp_gcc.o -o produto-openmp_gcc -fopenmp -lm -Ofast -march=native -mtune=native

produto-openmp_gcc.o: produto-openmp.c
	@gcc -c produto-openmp.c -o produto-openmp_gcc.o

produto-openmp_icx: produto-openmp_icx.o
	@icx produto-openmp_icx.o -o produto-openmp_icx -qopenmp -O3

produto-openmp_icx.o: produto-openmp.c
	@icx -w -c produto-openmp.c -o produto-openmp_icx.o

produto-openmp_dpcpp: produto-openmp_dpcpp.o
	@dpcpp produto-openmp_dpcpp.o -o produto-openmp_dpcpp -lpthread

produto-openmp_dpcpp.o: produto-openmp.c
	@dpcpp -c produto-openmp.c -o produto-openmp_dpcpp.o

produto-openmp_clang: produto-openmp_clang.o 
	@clang produto-openmp_clang.o -o produto-openmp_clang -fopenmp=libomp -lm -Ofast -march=native -mtune=native

produto-openmp_clang.o: produto-openmp.c
	@clang -c produto-openmp.c -o produto-openmp_clang.o

clean:
	@rm produto-openmp_gcc produto-openmp_gcc.o produto-openmp_icx produto-openmp_icx.o produto-openmp_dpcpp produto-openmp_dpcpp.o produto-openmp_clang produto-openmp_clang.o

run:
	@echo "Teste com N=10" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 10 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 10 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 10 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 10 >> testes-openmp.txt
	@echo "Teste com N=16" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 16 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 16 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 16 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 16 >> testes-openmp.txt
	@echo "Teste com N=50" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 50 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 50 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 50 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 50 >> testes-openmp.txt
	@echo "Teste com N=64" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 64 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 64 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 64 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 64 >> testes-openmp.txt
	@echo "Teste com N=100" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 100 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 10 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 100 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 100 >> testes-openmp.txt
	@echo "Teste com N=128" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 128 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 12 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 128 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 128 >> testes-openmp.txt
	@echo "Teste com N=500" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 500 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 50 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 500 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 500 >> testes-openmp.txt
	@echo "Teste com N=512" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 512 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 512 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 512 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 512 >> testes-openmp.txt
	@echo "Teste com N=750" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 750 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 750 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 750 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 750 >> testes-openmp.txt
	@echo "Teste com N=1000" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 1000 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 1000 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 1000 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 1000 >> testes-openmp.txt
	@echo "Teste com N=1024" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 1024 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 1024 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 1024 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 1024 >> testes-openmp.txt
	@echo "Teste com N=1250" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 1250 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 1250 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 1250 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 1250 >> testes-openmp.txt
	@echo "Teste com N=1600" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 1600 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 1600 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 1600 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 1600 >> testes-openmp.txt
	@echo "Teste com N=2000" >> testes-openmp.txt && echo "gcc :" >> testes-openmp.txt && ./produto-openmp_gcc 2000 >> testes-openmp.txt && echo "icx :" >> testes-openmp.txt && ./produto-openmp_icx 2000 >> testes-openmp.txt && echo "dpcpp :" >> testes-openmp.txt && ./produto-openmp_dpcpp 2000 >> testes-openmp.txt && echo "clang :" >> testes-openmp.txt && ./produto-openmp_clang 2000 >> testes-openmp.txt